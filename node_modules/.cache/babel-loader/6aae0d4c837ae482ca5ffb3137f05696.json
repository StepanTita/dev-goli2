{"ast":null,"code":"import _regeneratorRuntime from\"/home/stepan/Projects/goli/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/stepan/Projects/goli/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/stepan/Projects/goli/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import axios from\"axios\";import cx from\"classnames\";import React,{useEffect,useState}from\"react\";import{useHistory,useParams}from\"react-router\";import Hand from\"../../assets/images/Hand.png\";import Button from\"../Button/Button\";import Footer from\"../Footer/Footer\";import Navigation from\"../Navigation/Navigation\";import ProgressBar from\"../ProgressBar/ProgressBar\";import{fetchAndSetQuizes}from\"../Votings/Votings\";import styles from\"./VotingPage.module.scss\";var VotingPage=function VotingPage(props){var _currentQuiz$vote_det,_currentQuiz$vote_det2,_currentQuiz$vote_det3,_currentQuiz$vote_det4,_currentQuiz$vote_det5;var _useParams=useParams(),id=_useParams.id;var _useState=useState(undefined),_useState2=_slicedToArray(_useState,2),currentQuiz=_useState2[0],setCurrentQuiz=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),quizes=_useState4[0],setQuizes=_useState4[1];var fetchAndSetQuizById=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var quiz;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"https://dev-goli.herokuapp.com/api/quizes/\".concat(id));case 2:quiz=_context.sent;setCurrentQuiz(quiz.data);case 4:case\"end\":return _context.stop();}}},_callee);}));return function fetchAndSetQuizById(){return _ref.apply(this,arguments);};}();useEffect(function(){fetchAndSetQuizById();fetchAndSetQuizes(setQuizes);},[id]);var history=useHistory();return/*#__PURE__*/React.createElement(\"div\",{className:styles.votingPage},/*#__PURE__*/React.createElement(Navigation,null),/*#__PURE__*/React.createElement(\"div\",{style:{background:\"#F3F3F3\"}},/*#__PURE__*/React.createElement(\"div\",{className:\"flex flex-center\"},/*#__PURE__*/React.createElement(\"img\",{src:Hand,className:styles.leftHand,height:\"238.1\",width:\"238.1\",alt:\"leftHand\"}),/*#__PURE__*/React.createElement(\"h2\",{id:\"votings\"},\"Voting\"),/*#__PURE__*/React.createElement(\"img\",{src:Hand,className:styles.rightHand,alt:\"rightHand\"})),(currentQuiz===null||currentQuiz===void 0?void 0:currentQuiz.title)&&/*#__PURE__*/React.createElement(\"div\",{className:styles.card},/*#__PURE__*/React.createElement(\"h4\",null,currentQuiz===null||currentQuiz===void 0?void 0:currentQuiz.quiz_type),/*#__PURE__*/React.createElement(\"h2\",null,currentQuiz===null||currentQuiz===void 0?void 0:currentQuiz.title),/*#__PURE__*/React.createElement(\"h3\",null,\"Author: \".concat(currentQuiz===null||currentQuiz===void 0?void 0:(_currentQuiz$vote_det=currentQuiz.vote_detail)===null||_currentQuiz$vote_det===void 0?void 0:_currentQuiz$vote_det.author)),/*#__PURE__*/React.createElement(\"p\",null,currentQuiz===null||currentQuiz===void 0?void 0:currentQuiz.description),/*#__PURE__*/React.createElement(\"div\",{className:styles.answers,style:{marginTop:\"80px\",margin:\"auto\",display:\"flex\",flexDirection:\"column\",justifyContent:\"center\",alignItems:\"center\"}},/*#__PURE__*/React.createElement(\"h2\",null,\"Please choose answers below\"),/*#__PURE__*/React.createElement(Button,{variant:\"secondary--inactive\",style:{padding:\"11px 197px\",width:\"418px\",border:\"1px solid #c4c4c4\"}},currentQuiz===null||currentQuiz===void 0?void 0:(_currentQuiz$vote_det2=currentQuiz.vote_detail)===null||_currentQuiz$vote_det2===void 0?void 0:_currentQuiz$vote_det2.definition1),/*#__PURE__*/React.createElement(Button,{variant:\"secondary--inactive\",style:{padding:\"11px 197px\",width:\"418px\",border:\"1px solid #c4c4c4\"},className:\"mt2\"},currentQuiz===null||currentQuiz===void 0?void 0:(_currentQuiz$vote_det3=currentQuiz.vote_detail)===null||_currentQuiz$vote_det3===void 0?void 0:_currentQuiz$vote_det3.definition2),/*#__PURE__*/React.createElement(Button,{variant:\"secondary--inactive\",style:{padding:\"11px 197px\",width:\"418px\",border:\"1px solid #c4c4c4\"},className:\"mt2\"},currentQuiz===null||currentQuiz===void 0?void 0:(_currentQuiz$vote_det4=currentQuiz.vote_detail)===null||_currentQuiz$vote_det4===void 0?void 0:_currentQuiz$vote_det4.definition3),/*#__PURE__*/React.createElement(Button,{variant:\"secondary--inactive\",style:{padding:\"11px 197px\",width:\"418px\",border:\"1px solid #c4c4c4\"},className:\"mt2\"},currentQuiz===null||currentQuiz===void 0?void 0:(_currentQuiz$vote_det5=currentQuiz.vote_detail)===null||_currentQuiz$vote_det5===void 0?void 0:_currentQuiz$vote_det5.definition4))),/*#__PURE__*/React.createElement(\"h4\",{className:styles.topic},\"More from this topic\"),/*#__PURE__*/React.createElement(\"div\",{className:\"flex\",style:{overflowX:\"scroll\",margin:\"40px 178px\"}},quizes.filter(function(q){return(q===null||q===void 0?void 0:q.quiz_type)===(currentQuiz===null||currentQuiz===void 0?void 0:currentQuiz.quiz_type);}).map(function(quiz,index){var _quiz$voteDetails;return/*#__PURE__*/React.createElement(\"div\",{className:cx(styles.card2,{ml44:index!==0}),key:quiz.title},/*#__PURE__*/React.createElement(\"h4\",{className:styles[\"h4-1\"]},quiz.quiz_type||\"Art\"),/*#__PURE__*/React.createElement(\"h3\",null,quiz.title),/*#__PURE__*/React.createElement(\"h5\",null,(quiz===null||quiz===void 0?void 0:(_quiz$voteDetails=quiz.voteDetails)===null||_quiz$voteDetails===void 0?void 0:_quiz$voteDetails.author)||\"Автор: Люся Ветрова\"),/*#__PURE__*/React.createElement(\"p\",null,quiz.description),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(ProgressBar,{value:quiz.indicator_value,height:\"10px\"}),/*#__PURE__*/React.createElement(\"h4\",{className:styles.h4},quiz.goal*quiz.indicator_value,\" votes\"),/*#__PURE__*/React.createElement(Button,{className:\"mx-auto\",variant:\"secondary\",style:{padding:\"15px 40px\"},onClick:function onClick(){history.push(\"/voting/\".concat(quiz.id));}},\"View all details\")));}))),/*#__PURE__*/React.createElement(Footer,null));};export default VotingPage;","map":{"version":3,"sources":["/home/stepan/Projects/goli/src/components/VotingPage/VotingPage.jsx"],"names":["axios","cx","React","useEffect","useState","useHistory","useParams","Hand","Button","Footer","Navigation","ProgressBar","fetchAndSetQuizes","styles","VotingPage","props","id","undefined","currentQuiz","setCurrentQuiz","quizes","setQuizes","fetchAndSetQuizById","get","quiz","data","history","votingPage","background","leftHand","rightHand","title","card","quiz_type","vote_detail","author","description","answers","marginTop","margin","display","flexDirection","justifyContent","alignItems","padding","width","border","definition1","definition2","definition3","definition4","topic","overflowX","filter","q","map","index","card2","ml44","voteDetails","indicator_value","h4","goal","push"],"mappings":"gbAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,EAAP,KAAe,YAAf,CACA,MAAOC,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,UAAT,CAAqBC,SAArB,KAAsC,cAAtC,CACA,MAAOC,CAAAA,IAAP,KAAiB,8BAAjB,CACA,MAAOC,CAAAA,MAAP,KAAmB,kBAAnB,CACA,MAAOC,CAAAA,MAAP,KAAmB,kBAAnB,CACA,MAAOC,CAAAA,UAAP,KAAuB,0BAAvB,CACA,MAAOC,CAAAA,WAAP,KAAwB,4BAAxB,CACA,OAASC,iBAAT,KAAkC,oBAAlC,CACA,MAAOC,CAAAA,MAAP,KAAmB,0BAAnB,CACA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACC,KAAD,CAAW,sIACbT,SAAS,EADI,CACpBU,EADoB,YACpBA,EADoB,eAEUZ,QAAQ,CAACa,SAAD,CAFlB,wCAErBC,WAFqB,eAERC,cAFQ,8BAGAf,QAAQ,CAAC,EAAD,CAHR,yCAGrBgB,MAHqB,eAGbC,SAHa,eAI5B,GAAMC,CAAAA,mBAAmB,0FAAG,kKACPtB,CAAAA,KAAK,CAACuB,GAAN,qDAC4BP,EAD5B,EADO,QACpBQ,IADoB,eAI1BL,cAAc,CAACK,IAAI,CAACC,IAAN,CAAd,CAJ0B,sDAAH,kBAAnBH,CAAAA,mBAAmB,0CAAzB,CAOAnB,SAAS,CAAC,UAAM,CACdmB,mBAAmB,GACnBV,iBAAiB,CAACS,SAAD,CAAjB,CACD,CAHQ,CAGN,CAACL,EAAD,CAHM,CAAT,CAKA,GAAMU,CAAAA,OAAO,CAAGrB,UAAU,EAA1B,CAEA,mBACE,2BAAK,SAAS,CAAEQ,MAAM,CAACc,UAAvB,eACE,oBAAC,UAAD,MADF,cAEE,2BAAK,KAAK,CAAE,CAAEC,UAAU,CAAE,SAAd,CAAZ,eACE,2BAAK,SAAS,CAAC,kBAAf,eACE,2BACE,GAAG,CAAErB,IADP,CAEE,SAAS,CAAEM,MAAM,CAACgB,QAFpB,CAGE,MAAM,CAAC,OAHT,CAIE,KAAK,CAAC,OAJR,CAKE,GAAG,CAAC,UALN,EADF,cAQE,0BAAI,EAAE,CAAC,SAAP,WARF,cASE,2BAAK,GAAG,CAAEtB,IAAV,CAAgB,SAAS,CAAEM,MAAM,CAACiB,SAAlC,CAA6C,GAAG,CAAC,WAAjD,EATF,CADF,CAYG,CAAAZ,WAAW,OAAX,EAAAA,WAAW,SAAX,QAAAA,WAAW,CAAEa,KAAb,gBACC,2BAAK,SAAS,CAAElB,MAAM,CAACmB,IAAvB,eACE,8BAAKd,WAAL,SAAKA,WAAL,iBAAKA,WAAW,CAAEe,SAAlB,CADF,cAEE,8BAAKf,WAAL,SAAKA,WAAL,iBAAKA,WAAW,CAAEa,KAAlB,CAFF,cAGE,gDAAgBb,WAAhB,SAAgBA,WAAhB,wCAAgBA,WAAW,CAAEgB,WAA7B,gDAAgB,sBAA0BC,MAA1C,EAHF,cAIE,6BAAIjB,WAAJ,SAAIA,WAAJ,iBAAIA,WAAW,CAAEkB,WAAjB,CAJF,cAKE,2BACE,SAAS,CAAEvB,MAAM,CAACwB,OADpB,CAEE,KAAK,CAAE,CACLC,SAAS,CAAE,MADN,CAELC,MAAM,CAAE,MAFH,CAGLC,OAAO,CAAE,MAHJ,CAILC,aAAa,CAAE,QAJV,CAKLC,cAAc,CAAE,QALX,CAMLC,UAAU,CAAE,QANP,CAFT,eAWE,4DAXF,cAYE,oBAAC,MAAD,EACE,OAAO,CAAC,qBADV,CAEE,KAAK,CAAE,CACLC,OAAO,CAAE,YADJ,CAELC,KAAK,CAAE,OAFF,CAGLC,MAAM,CAAE,mBAHH,CAFT,EAQG5B,WARH,SAQGA,WARH,yCAQGA,WAAW,CAAEgB,WARhB,iDAQG,uBAA0Ba,WAR7B,CAZF,cAsBE,oBAAC,MAAD,EACE,OAAO,CAAC,qBADV,CAEE,KAAK,CAAE,CACLH,OAAO,CAAE,YADJ,CAELC,KAAK,CAAE,OAFF,CAGLC,MAAM,CAAE,mBAHH,CAFT,CAOE,SAAS,CAAC,KAPZ,EASG5B,WATH,SASGA,WATH,yCASGA,WAAW,CAAEgB,WAThB,iDASG,uBAA0Bc,WAT7B,CAtBF,cAiCE,oBAAC,MAAD,EACE,OAAO,CAAC,qBADV,CAEE,KAAK,CAAE,CACLJ,OAAO,CAAE,YADJ,CAELC,KAAK,CAAE,OAFF,CAGLC,MAAM,CAAE,mBAHH,CAFT,CAOE,SAAS,CAAC,KAPZ,EASG5B,WATH,SASGA,WATH,yCASGA,WAAW,CAAEgB,WAThB,iDASG,uBAA0Be,WAT7B,CAjCF,cA4CE,oBAAC,MAAD,EACE,OAAO,CAAC,qBADV,CAEE,KAAK,CAAE,CACLL,OAAO,CAAE,YADJ,CAELC,KAAK,CAAE,OAFF,CAGLC,MAAM,CAAE,mBAHH,CAFT,CAOE,SAAS,CAAC,KAPZ,EASG5B,WATH,SASGA,WATH,yCASGA,WAAW,CAAEgB,WAThB,iDASG,uBAA0BgB,WAT7B,CA5CF,CALF,CAbJ,cA4EE,0BAAI,SAAS,CAAErC,MAAM,CAACsC,KAAtB,yBA5EF,cA6EE,2BACE,SAAS,CAAC,MADZ,CAEE,KAAK,CAAE,CAAEC,SAAS,CAAE,QAAb,CAAuBb,MAAM,CAAE,YAA/B,CAFT,EAIGnB,MAAM,CACJiC,MADF,CACS,SAACC,CAAD,QAAO,CAAAA,CAAC,OAAD,EAAAA,CAAC,SAAD,QAAAA,CAAC,CAAErB,SAAH,KAAiBf,WAAjB,SAAiBA,WAAjB,iBAAiBA,WAAW,CAAEe,SAA9B,CAAP,EADT,EAEEsB,GAFF,CAEM,SAAC/B,IAAD,CAAOgC,KAAP,CAAiB,uBACpB,mBACE,2BACE,SAAS,CAAEvD,EAAE,CAACY,MAAM,CAAC4C,KAAR,CAAe,CAAEC,IAAI,CAAEF,KAAK,GAAK,CAAlB,CAAf,CADf,CAEE,GAAG,CAAEhC,IAAI,CAACO,KAFZ,eAIE,0BAAI,SAAS,CAAElB,MAAM,CAAC,MAAD,CAArB,EAAgCW,IAAI,CAACS,SAAL,EAAkB,KAAlD,CAJF,cAKE,8BAAKT,IAAI,CAACO,KAAV,CALF,cAME,8BAAK,CAAAP,IAAI,OAAJ,EAAAA,IAAI,SAAJ,2BAAAA,IAAI,CAAEmC,WAAN,8DAAmBxB,MAAnB,GAA6B,qBAAlC,CANF,cAOE,6BAAIX,IAAI,CAACY,WAAT,CAPF,cAQE,4CACE,oBAAC,WAAD,EAAa,KAAK,CAAEZ,IAAI,CAACoC,eAAzB,CAA0C,MAAM,CAAC,MAAjD,EADF,cAEE,0BAAI,SAAS,CAAE/C,MAAM,CAACgD,EAAtB,EACGrC,IAAI,CAACsC,IAAL,CAAYtC,IAAI,CAACoC,eADpB,UAFF,cAME,oBAAC,MAAD,EACE,SAAS,CAAC,SADZ,CAEE,OAAO,CAAC,WAFV,CAGE,KAAK,CAAE,CAAEhB,OAAO,CAAE,WAAX,CAHT,CAIE,OAAO,CAAE,kBAAM,CACblB,OAAO,CAACqC,IAAR,mBAAwBvC,IAAI,CAACR,EAA7B,GACD,CANH,qBANF,CARF,CADF,CA4BD,CA/BF,CAJH,CA7EF,CAFF,cAqHE,oBAAC,MAAD,MArHF,CADF,CAyHD,CA3ID,CA6IA,cAAeF,CAAAA,UAAf","sourcesContent":["import axios from \"axios\";\nimport cx from \"classnames\";\nimport React, { useEffect, useState } from \"react\";\nimport { useHistory, useParams } from \"react-router\";\nimport Hand from \"../../assets/images/Hand.png\";\nimport Button from \"../Button/Button\";\nimport Footer from \"../Footer/Footer\";\nimport Navigation from \"../Navigation/Navigation\";\nimport ProgressBar from \"../ProgressBar/ProgressBar\";\nimport { fetchAndSetQuizes } from \"../Votings/Votings\";\nimport styles from \"./VotingPage.module.scss\";\nconst VotingPage = (props) => {\n  const { id } = useParams();\n  const [currentQuiz, setCurrentQuiz] = useState(undefined);\n  const [quizes, setQuizes] = useState([]);\n  const fetchAndSetQuizById = async () => {\n    const quiz = await axios.get(\n      `https://dev-goli.herokuapp.com/api/quizes/${id}`\n    );\n    setCurrentQuiz(quiz.data);\n  };\n\n  useEffect(() => {\n    fetchAndSetQuizById();\n    fetchAndSetQuizes(setQuizes);\n  }, [id]);\n\n  const history = useHistory();\n\n  return (\n    <div className={styles.votingPage}>\n      <Navigation />\n      <div style={{ background: \"#F3F3F3\" }}>\n        <div className=\"flex flex-center\">\n          <img\n            src={Hand}\n            className={styles.leftHand}\n            height=\"238.1\"\n            width=\"238.1\"\n            alt=\"leftHand\"\n          />\n          <h2 id=\"votings\">Voting</h2>\n          <img src={Hand} className={styles.rightHand} alt=\"rightHand\" />\n        </div>\n        {currentQuiz?.title && (\n          <div className={styles.card}>\n            <h4>{currentQuiz?.quiz_type}</h4>\n            <h2>{currentQuiz?.title}</h2>\n            <h3>{`Author: ${currentQuiz?.vote_detail?.author}`}</h3>\n            <p>{currentQuiz?.description}</p>\n            <div\n              className={styles.answers}\n              style={{\n                marginTop: \"80px\",\n                margin: \"auto\",\n                display: \"flex\",\n                flexDirection: \"column\",\n                justifyContent: \"center\",\n                alignItems: \"center\",\n              }}\n            >\n              <h2>Please choose answers below</h2>\n              <Button\n                variant=\"secondary--inactive\"\n                style={{\n                  padding: \"11px 197px\",\n                  width: \"418px\",\n                  border: \"1px solid #c4c4c4\",\n                }}\n              >\n                {currentQuiz?.vote_detail?.definition1}\n              </Button>\n              <Button\n                variant=\"secondary--inactive\"\n                style={{\n                  padding: \"11px 197px\",\n                  width: \"418px\",\n                  border: \"1px solid #c4c4c4\",\n                }}\n                className=\"mt2\"\n              >\n                {currentQuiz?.vote_detail?.definition2}\n              </Button>\n              <Button\n                variant=\"secondary--inactive\"\n                style={{\n                  padding: \"11px 197px\",\n                  width: \"418px\",\n                  border: \"1px solid #c4c4c4\",\n                }}\n                className=\"mt2\"\n              >\n                {currentQuiz?.vote_detail?.definition3}\n              </Button>\n              <Button\n                variant=\"secondary--inactive\"\n                style={{\n                  padding: \"11px 197px\",\n                  width: \"418px\",\n                  border: \"1px solid #c4c4c4\",\n                }}\n                className=\"mt2\"\n              >\n                {currentQuiz?.vote_detail?.definition4}\n              </Button>\n            </div>\n          </div>\n        )}\n        <h4 className={styles.topic}>More from this topic</h4>\n        <div\n          className=\"flex\"\n          style={{ overflowX: \"scroll\", margin: \"40px 178px\" }}\n        >\n          {quizes\n            .filter((q) => q?.quiz_type === currentQuiz?.quiz_type)\n            .map((quiz, index) => {\n              return (\n                <div\n                  className={cx(styles.card2, { ml44: index !== 0 })}\n                  key={quiz.title}\n                >\n                  <h4 className={styles[\"h4-1\"]}>{quiz.quiz_type || \"Art\"}</h4>\n                  <h3>{quiz.title}</h3>\n                  <h5>{quiz?.voteDetails?.author || \"Автор: Люся Ветрова\"}</h5>\n                  <p>{quiz.description}</p>\n                  <div>\n                    <ProgressBar value={quiz.indicator_value} height=\"10px\" />\n                    <h4 className={styles.h4}>\n                      {quiz.goal * quiz.indicator_value} votes\n                    </h4>\n\n                    <Button\n                      className=\"mx-auto\"\n                      variant=\"secondary\"\n                      style={{ padding: \"15px 40px\" }}\n                      onClick={() => {\n                        history.push(`/voting/${quiz.id}`);\n                      }}\n                    >\n                      View all details\n                    </Button>\n                  </div>\n                </div>\n              );\n            })}\n        </div>\n      </div>\n      <Footer />\n    </div>\n  );\n};\n\nexport default VotingPage;\n"]},"metadata":{},"sourceType":"module"}