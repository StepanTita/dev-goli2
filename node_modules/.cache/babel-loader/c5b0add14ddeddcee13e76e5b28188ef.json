{"ast":null,"code":"import _slicedToArray from\"/home/stepan/Projects/goli/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _regeneratorRuntime from\"/home/stepan/Projects/goli/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/stepan/Projects/goli/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import axios from\"axios\";import cx from\"classnames\";import React,{useEffect,useState}from\"react\";import{useHistory}from\"react-router\";import Hand from\"../../assets/images/Hand.png\";import Button from\"../Button/Button\";import ProgressBar from\"../ProgressBar/ProgressBar\";import styles from\"./Votings.module.scss\";export var categories=[{title:\"Latest\"},{title:\"Art\"},{title:\"Politics\"},{title:\"Science\"},{title:\"Sport\"}];export var fetchAndSetQuizes=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref){var setQuizes,_ref$page_size,page_size,_ref$page,page,setCount,quizes;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setQuizes=_ref.setQuizes,_ref$page_size=_ref.page_size,page_size=_ref$page_size===void 0?100:_ref$page_size,_ref$page=_ref.page,page=_ref$page===void 0?1:_ref$page,setCount=_ref.setCount;_context.next=3;return axios.get(\"https://dev-goli.herokuapp.com/api/quizes?page_size=\".concat(page_size,\"&page=\").concat(page));case 3:quizes=_context.sent;if(setCount){setCount(quizes.data.count);}setQuizes(quizes.data.results);case 6:case\"end\":return _context.stop();}}},_callee);}));return function fetchAndSetQuizes(_x){return _ref2.apply(this,arguments);};}();var Votings=function Votings(props){var _useState=useState(\"Latest\"),_useState2=_slicedToArray(_useState,2),currentCategory=_useState2[0],setCurrentCategory=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),quizes=_useState4[0],setQuizes=_useState4[1];useEffect(function(){fetchAndSetQuizes({setQuizes:setQuizes});},[]);var history=useHistory();return/*#__PURE__*/React.createElement(\"div\",{className:cx(styles.votings,\"pb3\")},/*#__PURE__*/React.createElement(\"div\",{className:\"flex flex-center\"},/*#__PURE__*/React.createElement(\"img\",{src:Hand,className:styles.leftHand,alt:\"leftHand\"}),/*#__PURE__*/React.createElement(\"h2\",{id:\"votings\"},\"Votings\"),/*#__PURE__*/React.createElement(\"img\",{src:Hand,className:styles.rightHand,alt:\"rightHand\"})),/*#__PURE__*/React.createElement(\"div\",{className:cx(\"flex flex-center\",styles.categories)},/*#__PURE__*/React.createElement(\"h5\",null,\"Categories\"),categories.map(function(category,index){return/*#__PURE__*/React.createElement(Button,{variant:currentCategory===category.title?\"secondary\":\"secondary--inactive\",onClick:function onClick(){return setCurrentCategory(category.title);},key:category.title,className:cx(\"ml2\")},category.title);})),/*#__PURE__*/React.createElement(\"div\",{className:\"flex flex-center mt4\"},quizes.filter(function(q){return q.quiz_type===currentCategory;}).filter(function(_,index){return index<3;}).map(function(quiz,index){return/*#__PURE__*/React.createElement(\"div\",{className:cx(styles.card,{ml3:index!==0}),key:quiz.title},/*#__PURE__*/React.createElement(\"h4\",{className:styles[\"h4-1\"]},quiz.quiz_type||\"Art\"),/*#__PURE__*/React.createElement(\"h3\",null,quiz.title),/*#__PURE__*/React.createElement(\"h5\",null,(quiz===null||quiz===void 0?void 0:quiz.author)||\"Anonymous\"),/*#__PURE__*/React.createElement(\"p\",null,quiz.description),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(ProgressBar,{value:quiz.indicator_value,height:\"10px\"}),/*#__PURE__*/React.createElement(\"h4\",{className:styles.h4},quiz.goal*quiz.indicator_value,\" votes\"),/*#__PURE__*/React.createElement(\"h5\",{className:styles.h5,style:{cursor:\"pointer\"},onClick:function onClick(){history.push(\"/voting/\".concat(quiz.id));}},\"View all details\")));})),/*#__PURE__*/React.createElement(Button,{variant:\"primary\",className:\"mt3 mx-auto\",style:{padding:\"22.5px 66px\"},onClick:function onClick(){history.push(\"/votings\");}},\"VIEW ALL\"));};export default Votings;","map":{"version":3,"sources":["/home/stepan/Projects/goli/src/components/Votings/Votings.jsx"],"names":["axios","cx","React","useEffect","useState","useHistory","Hand","Button","ProgressBar","styles","categories","title","fetchAndSetQuizes","setQuizes","page_size","page","setCount","get","quizes","data","count","results","Votings","props","currentCategory","setCurrentCategory","history","votings","leftHand","rightHand","map","category","index","filter","q","quiz_type","_","quiz","card","ml3","author","description","indicator_value","h4","goal","h5","cursor","push","id","padding"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport cx from \"classnames\";\nimport React, { useEffect, useState } from \"react\";\nimport { useHistory } from \"react-router\";\nimport Hand from \"../../assets/images/Hand.png\";\nimport Button from \"../Button/Button\";\nimport ProgressBar from \"../ProgressBar/ProgressBar\";\nimport styles from \"./Votings.module.scss\";\n\nexport const categories = [\n  { title: \"Latest\" },\n  { title: \"Art\" },\n  { title: \"Politics\" },\n  { title: \"Science\" },\n  { title: \"Sport\" },\n];\n\nexport const fetchAndSetQuizes = async ({\n  setQuizes,\n  page_size = 100,\n  page = 1,\n  setCount,\n}) => {\n  const quizes = await axios.get(\n    `https://dev-goli.herokuapp.com/api/quizes?page_size=${page_size}&page=${page}`\n  );\n  if (setCount) {\n    setCount(quizes.data.count);\n  }\n\n  setQuizes(quizes.data.results);\n};\n\nconst Votings = (props) => {\n  const [currentCategory, setCurrentCategory] = useState(\"Latest\");\n  const [quizes, setQuizes] = useState([]);\n\n  useEffect(() => {\n    fetchAndSetQuizes({ setQuizes });\n  }, []);\n\n  const history = useHistory();\n\n  return (\n    <div className={cx(styles.votings, \"pb3\")}>\n      <div className=\"flex flex-center\">\n        <img src={Hand} className={styles.leftHand} alt=\"leftHand\" />\n        <h2 id=\"votings\">Votings</h2>\n\n        <img src={Hand} className={styles.rightHand} alt=\"rightHand\" />\n      </div>\n      <div className={cx(\"flex flex-center\", styles.categories)}>\n        <h5>Categories</h5>\n        {categories.map((category, index) => (\n          <Button\n            variant={\n              currentCategory === category.title\n                ? \"secondary\"\n                : \"secondary--inactive\"\n            }\n            onClick={() => setCurrentCategory(category.title)}\n            key={category.title}\n            className={cx(\"ml2\")}\n          >\n            {category.title}\n          </Button>\n        ))}\n      </div>\n      <div className=\"flex flex-center mt4\">\n        {quizes\n          .filter((q) => q.quiz_type === currentCategory)\n          .filter((_, index) => index < 3)\n          .map((quiz, index) => (\n            <div\n              className={cx(styles.card, { ml3: index !== 0 })}\n              key={quiz.title}\n            >\n              <h4 className={styles[\"h4-1\"]}>{quiz.quiz_type || \"Art\"}</h4>\n              <h3>{quiz.title}</h3>\n              <h5>{quiz?.author || \"Anonymous\"}</h5>\n              <p>{quiz.description}</p>\n              <div>\n                <ProgressBar value={quiz.indicator_value} height=\"10px\" />\n                <h4 className={styles.h4}>\n                  {quiz.goal * quiz.indicator_value} votes\n                </h4>\n\n                <h5\n                  className={styles.h5}\n                  style={{ cursor: \"pointer\" }}\n                  onClick={() => {\n                    history.push(`/voting/${quiz.id}`);\n                  }}\n                >\n                  View all details\n                </h5>\n              </div>\n            </div>\n          ))}\n      </div>\n      <Button\n        variant=\"primary\"\n        className=\"mt3 mx-auto\"\n        style={{ padding: \"22.5px 66px\" }}\n        onClick={() => {\n          history.push(\"/votings\");\n        }}\n      >\n        VIEW ALL\n      </Button>\n    </div>\n  );\n};\n\nexport default Votings;\n"]},"metadata":{},"sourceType":"module"}